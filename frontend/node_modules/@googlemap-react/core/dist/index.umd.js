!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("loadjs"),require("react-dom"),require("react-dom/server"),require("uuid/v1"),require("react")):"function"==typeof define&&define.amd?define(["exports","loadjs","react-dom","react-dom/server","uuid/v1","react"],n):n(e.core={},e.loadjs,e.ReactDOM,e.ReactDOMServer,e.uuid,e.react)}(this,function(e,n,a,t,o,r){"use strict";n=n&&n.hasOwnProperty("default")?n.default:n,a=a&&a.hasOwnProperty("default")?a.default:a,t=t&&t.hasOwnProperty("default")?t.default:t,o=o&&o.hasOwnProperty("default")?o.default:o;var i="default"in r?r.default:r,d={lat:40.7128,lng:-74.006},l=[{lat:40.718,lng:-74.006},{lat:40.718,lng:-74.01},{lat:40.7138,lng:-74.001},{lat:40.7128,lng:-74.005}],c={east:-74,west:-74.006,north:40.718,south:40.714},s={center:d,radius:200},u={},m={url:"https://placehold.it/256x256",bounds:c},p={data:[{lat:40.718,lng:-74.006},{lat:40.712,lng:-74.01}],radius:100},g={content:"Hello",position:d},f={url:"http://api.flickr.com/services/feeds/geo/?g=322338@N20&lang=en-us&format=feed-georss"},v={center:d,zoom:14},h={height:"100%",width:"100%"},y={position:d},b={paths:l},C={path:l},S={bounds:c},w={bounds:c},j={bounds:c},O={position:d},E=["drawing","geometry","places","visualization"],k=function(e){var a=e.apiKey,t=e.libraryParam,o=e.languageParam,i=e.regionParam,d=r.useState(!1),l=d[0],c=d[1];return r.useEffect(function(){if("undefined"!=typeof document){var e="https://maps.googleapis.com/maps/api/js?key="+a+t+o+i;n.isDefined("gmap")||n(e,"gmap"),n.ready("gmap",{success:function(){c(!0)},error:function(){n.reset(),console.error("Unable to fetch Google Map sdk")}})}},[]),l},_=function(e,n){r.useEffect(function(){if(void 0!==e){var a=[];return n.forEach(function(n){n.handler&&a.push(google.maps.event.addListener(e,n.name,n.handler))}),function(){a.forEach(function(e){return e.remove()})}}},[e,n])},M=function(e,n,a,t){r.useEffect(function(){void 0!==e&&void 0!==n&&JSON.stringify(n)!==a&&(e.setOptions(n),t(JSON.stringify(n)))},[e,n])},P=function(){return{map:void 0,objects:new Map,places:void 0}},N=i.createContext({state:void 0,dispatch:void 0}),x=function(e,n){switch(n.type){case"reset":return P();case"init_map":if(void 0===n.map)throw new Error("You should specify a map instance");if(void 0!==e.map)throw new Error("There can only be one map instance in a context");return Object.assign({},e,{map:n.map,places:n.places});case"add_object":if(void 0===n.object)throw new Error("You should specify an object instance");if(void 0===n.id)throw new Error("You should specify an id");if(e.objects.has(n.id))throw new Error("The id has already been taken");return e.objects.set(n.id,n.object),e;case"remove_object":if(void 0===n.id)throw new Error("You should specify an id");var a=e.objects.get(n.id);if(void 0===a)throw new Error("There is no object with the given id");return a.setMap&&a.setMap(null),e.objects.delete(n.id),e;default:return e}},D=N.Consumer,L=function(e){var n=e.id,a=e.opts;void 0===a&&(a=j);var d=e.onPlaceChanged,l=e.bindingPosition,c=function(e,n){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&-1===n.indexOf(t)&&(a[t]=e[t]);return a}(e,["id","opts","onPlaceChanged","bindingPosition"]),s=r.useContext(N),u=s.state,m=s.dispatch,p=r.useState(""),g=p[0],f=p[1],v=r.useState(void 0),h=v[0],y=v[1],b=r.useState(n||"autocomplete-"+o())[0],C=r.useState(document.createRange().createContextualFragment(t.renderToString(i.createElement("input",Object.assign({id:b},c)))).firstElementChild)[0],S=r.useState(l),w=S[0],O=S[1];return r.useEffect(function(){if(void 0!==u.map&&void 0!==u.places){var e=l?C:document.getElementById(b),n=new google.maps.places.Autocomplete(e,a);if(y(n),function(e){m({type:"add_object",object:e,id:b})}(n),f(JSON.stringify(a)),l){if(l!==w){var t=u.map.controls[google.maps.ControlPosition[w]],o=t.getArray();t.removeAt(o.findIndex(function(e){return e===C})),O(l)}u.map.controls[google.maps.ControlPosition[l]].push(e)}return function(){return m({type:"remove_object",id:b})}}},[u.places,l]),_(h,[{name:"place_changed",handler:d}]),M(h,a,g,f),l?null:i.createElement("input",Object.assign({id:b},c))};L.displayName="Autocomplete";var T=function(e){return i.createElement(L,Object.assign({},e))};T.displayName="Autocomplete";var R=function(e){return i.createElement(L,Object.assign({},e))};R.displayName="StandaloneAutocomplete";var B=function(e){var n=e.type,a=e.opts,t=n+"-layer",o=r.useContext(N),i=o.state,d=o.dispatch,l=r.useState(void 0),c=l[0],s=l[1];return r.useEffect(function(){if(void 0!==i.map){var e={bicycling:google.maps.BicyclingLayer,traffic:google.maps.TrafficLayer,transit:google.maps.TransitLayer},o="traffic"===n?new e[n](a):new e[n];return o.setMap(i.map),s(o),function(e){d({type:"add_object",object:e,id:t})}(o),function(){return d({type:"remove_object",id:t})}}},[i.map]),r.useEffect(function(){"traffic"===n&&void 0!==a&&void 0!==c&&c.setOptions(a)},[a]),null};B.displayName="layer";var I=function(e){return i.createElement(B,{type:"bicycling"})};I.displayName="BicyclingLayer";var A=function(e){var n=e.id,a=e.opts;void 0===a&&(a=s);var t=e.onCenterChanged,i=e.onClick,d=e.onDoubleClick,l=e.onDrag,c=e.onDragEnd,u=e.onDragStart,m=e.onMouseDown,p=e.onMouseOut,g=e.onMouseOver,f=e.onMouseUp,v=e.onRadiusChanged,h=e.onRightClick,y=r.useContext(N),b=y.state,C=y.dispatch,S=r.useState(""),w=S[0],j=S[1],O=r.useState(void 0),E=O[0],k=O[1],P=r.useState(n||"circle-"+o())[0];return r.useEffect(function(){if(void 0!==b.map){var e=new google.maps.Circle(Object.assign({},a,{map:b.map}));return k(e),j(JSON.stringify(a)),function(e){C({type:"add_object",object:e,id:P})}(e),function(){return C({type:"remove_object",id:P})}}},[b.map]),_(E,[{name:"center_changed",handler:t},{name:"click",handler:i},{name:"dblclick",handler:d},{name:"drag",handler:l},{name:"dragend",handler:c},{name:"dragstart",handler:u},{name:"mousedown",handler:m},{name:"mouseout",handler:p},{name:"mouseover",handler:g},{name:"mouseup",handler:f},{name:"radius_changed",handler:v},{name:"rightclick",handler:h}]),M(E,a,w,j),null};A.displayName="Circle";var J=function(e){var n=e.bindingPosition;void 0===n&&(n="RIGHT_TOP");var t=e.children,o=r.useContext(N).state,i=r.useRef(),d=r.useState(!1),l=d[0],c=d[1],s=r.useState(n),u=s[0],m=s[1];return r.useEffect(function(){if(void 0!==o.map){if(i.current=document.createElement("div"),n!==u){var e=o.map.controls[google.maps.ControlPosition[u]],a=e.getArray();e.removeAt(a.findIndex(function(e){return e===i.current})),m(n)}o.map.controls[google.maps.ControlPosition[n]].push(i.current),c(!0)}},[o.map,n]),l?a.createPortal(t,i.current):null};J.displayName="CustomControl";var V=function(e){var n=e.opts;void 0===n&&(n=u);var a=e.onCircleComplete,t=e.onMarkerComplete,o=e.onOverlayComplete,i=e.onPolygonComplete,d=e.onPolylineComplete,l=e.onRectangleComplete,c=r.useContext(N),s=c.state,m=c.dispatch,p=r.useState(""),g=p[0],f=p[1],v=r.useState(void 0),h=v[0],y=v[1],b=r.useState(0),C=b[0],S=b[1],w=r.useRef(0);return w.current=C,r.useEffect(function(){if(void 0!==s.map){var e=new google.maps.drawing.DrawingManager(Object.assign({},n,{map:s.map}));return y(e),f(JSON.stringify(n)),function(e){m({type:"add_object",object:e,id:"drawing-manager"})}(e),function(){return function(){for(var e=0;e<w.current;e++)m({type:"remove_object",id:"drawing-manager-"+e})}(),void m({type:"remove_object",id:"drawing-manager"})}}},[s.map]),_(h,[{name:"circlecomplete",handler:a},{name:"markercomplete",handler:t},{name:"overlaycomplete",handler:o},{name:"overlaycomplete",handler:function(e){return n=e.overlay,S(function(e){return m({type:"add_object",object:n,id:"drawing-manager-"+e}),e+1});var n}},{name:"polygoncomplete",handler:i},{name:"polylinecomplete",handler:d},{name:"rectanglecomplete",handler:l}]),M(h,n,g,f),null};V.displayName="DrawingManager";var G=function(e){var n=e.id,a=e.opts;void 0===a&&(a=m);var t=e.onClick,i=e.onDoubleClick,d=r.useContext(N),l=d.state,c=d.dispatch,s=r.useState(void 0),u=s[0],p=s[1],g=r.useState(n||"ground-overlay-"+o())[0],f=r.useState(void 0),v=f[0],h=f[1],y=r.useState(!0),b=y[0],C=y[1],S=function(){return c({type:"remove_object",id:g})},w=function(){var e=new google.maps.GroundOverlay(a.url,a.bounds,{clickable:a.clickable,opacity:a.opacity,map:l.map});p(e),h(a.bounds),C(void 0===a.clickable||a.clickable),function(e){c({type:"add_object",object:e,id:g})}(e)};return r.useEffect(function(){if(void 0!==l.map)return w(),function(){return S()}},[l.map]),_(u,[{name:"click",handler:t},{name:"dblclick",handler:i}]),r.useEffect(function(){void 0!==u&&a.opacity&&a.opacity!==u.getOpacity()&&u.setOpacity(a.opacity)},[a.opacity]),r.useEffect(function(){if(void 0!==l.map&&void 0!==u){var e=void 0===a.clickable||a.clickable;a.url===u.getUrl()&&Object.is(JSON.stringify(a.bounds),JSON.stringify(v))&&e===b||(S(),w())}},[a.url,a.bounds,a.clickable]),null};G.displayName="GroundOverlay";var z=function(){return window.hasOwnProperty("google")&&google.maps&&google.maps.visualization},H=function(e){return function(n){var a=r.useState(!1),t=a[0],o=a[1];return r.useEffect(function(){if(z())o(!0);else var e=setInterval(function(){z()&&(o(!0),clearInterval(e))},500)},[]),i.createElement(i.Fragment,null,t?i.createElement(e,Object.assign({},n)):null)}},F=function(e){return{location:new google.maps.LatLng(e.lat,e.lng),weight:e.weight||1}},U=H(function(e){var n=e.id,a=e.opts;void 0===a&&(a=p);var t=r.useContext(N),i=t.state,d=t.dispatch,l=r.useState(void 0),c=l[0],s=l[1],u=r.useState(n||"heat-map-"+o())[0];return r.useEffect(function(){if(void 0!==i.map){var e=new google.maps.visualization.HeatmapLayer(Object.assign({},a,{data:a.data.map(function(e){return F(e)}),map:i.map}));return s(e),d({type:"add_object",object:e,id:u}),function(){return d({type:"remove_object",id:u})}}},[i.map]),r.useEffect(function(){void 0!==c&&void 0!==a.data&&c.setData(a.data.map(function(e){return F(e)}))},[a.data]),null}),K=function(e){var n=e.anchorId,t=e.opts;void 0===t&&(t=g);var o=e.visible,i=e.children,d=e.onCloseClick,l=e.onContentChanged,c=e.onDOMReady,s=e.onPositionChanged,u=e.onZIndexChanged;if("undefined"==typeof document)return null;var m=r.useContext(N).state,p=r.useState(void 0),f=p[0],v=p[1],h=r.useState(document.createElement("div"))[0];return r.useEffect(function(){if(void 0!==m.map){var e=new google.maps.InfoWindow(Object.assign({},t,{content:i?h:t.content}));v(e);var a=n?m.objects.get(n):void 0;return o?e.open(m.map,a):e.close(),function(){return e.close()}}},[m.map,o,n&&m.objects.get(n)]),_(f,[{name:"closeclick",handler:d},{name:"content_changed",handler:l},{name:"domready",handler:c},{name:"position_changed",handler:s},{name:"zindex_changed",handler:u}]),r.useEffect(function(){void 0!==f&&f.setOptions(Object.assign({},t,{content:i?h:t.content}))},[t]),a.createPortal(i,h)};K.displayName="InfoWindow";var q=function(e){var n=e.id,a=e.opts;void 0===a&&(a=f);var t=e.onClick,i=e.onDefaultViewportChanged,d=e.onStatusChanged,l=r.useContext(N),c=l.state,s=l.dispatch,u=r.useState(""),m=u[0],p=u[1],g=r.useState(void 0),v=g[0],h=g[1],y=r.useState(n||"kml-layer-"+o())[0];return r.useEffect(function(){if(void 0!==c.map){var e=new google.maps.KmlLayer(Object.assign({},a,{map:c.map}));return h(e),p(JSON.stringify(a)),function(e){s({type:"add_object",object:e,id:y})}(e),function(){return s({type:"remove_object",id:y})}}},[c.map]),_(v,[{name:"click",handler:t},{name:"defaultviewport_changed",handler:i},{name:"status_changed",handler:d}]),M(v,a,m,p),null};q.displayName="KmlLayer";var Y=function(e){var n=e.apiKey;void 0===n&&(n="");var a=e.language,t=e.region,o=e.className,d=e.style;void 0===d&&(d=h);var l=e.opts;void 0===l&&(l=v);var c=e.useDrawing;void 0===c&&(c=!1);var s=e.useGeometry;void 0===s&&(s=!1);var u=e.usePlaces;void 0===u&&(u=!1);var m=e.useVisualization;void 0===m&&(m=!1);var p=e.LoadedComponent;void 0===p&&(p=null);var g=e.LoadingComponent;void 0===g&&(g=i.createElement("p",null,"Loading..."));var f=e.onBoundsChanged,y=e.onCenterChanged,b=e.onClick,C=e.onDoubleClick,S=e.onDrag,w=e.onDragEnd,j=e.onDragStart,O=e.onHeadingChanged,P=e.onIdle,x=e.onMapTypeIdChanged,D=e.onMouseMove,L=e.onMouseOut,T=e.onMouseOver,R=e.onProjectionChanged,B=e.onRightClick,I=e.onTilesLoaded,A=e.onTiltChanged,J=e.onZoomChanged,V=r.useContext(N).dispatch,G=r.useState(""),z=G[0],H=G[1],F=r.useState(void 0),U=F[0],K=F[1],q=r.useRef(null),Y=function(e,n){return V({type:"init_map",map:e,places:n})},Z={drawing:c,geometry:s,places:u,visualization:m},W=E.filter(function(e){return Z[e]}).join(","),Q=k({apiKey:n,libraryParam:""===W?"":"&libraries="+W,languageParam:void 0===a?"":"&language="+a,regionParam:void 0===t?"":"&region="+t});return r.useEffect(function(){if(Q){var e=JSON.stringify(l),n=new google.maps.Map(q.current,JSON.parse(e));if(K(n),H(e),u){var a=new google.maps.places.PlacesService(n);Y(n,a)}else Y(n);return function(){return V({type:"reset"})}}},[Q]),_(U,[{name:"bounds_changed",handler:f},{name:"center_changed",handler:y},{name:"click",handler:b},{name:"dblclick",handler:C},{name:"drag",handler:S},{name:"dragend",handler:w},{name:"dragstart",handler:j},{name:"heading_changed",handler:O},{name:"idle",handler:P},{name:"maptypeid_changed",handler:x},{name:"mousemove",handler:D},{name:"mouseout",handler:L},{name:"mouseover",handler:T},{name:"projection_changed",handler:R},{name:"rightclick",handler:B},{name:"tilesloaded",handler:I},{name:"tilt_changed",handler:A},{name:"zoom_changed",handler:J}]),M(U,l,z,H),i.createElement(i.Fragment,null,Q?p:g,i.createElement("div",{ref:q,style:d,className:o}))};Y.displayName="MapBox";var Z=function(e){var n=e.id,a=e.opts;void 0===a&&(a=y);var t=e.onAnimationChanged,i=e.onClick,d=e.onClickableChanged,l=e.onCursorChanged,c=e.onDoubleClick,s=e.onDrag,u=e.onDragEnd,m=e.onDragStart,p=e.onDraggableChanged,g=e.onFlatChanged,f=e.onIconChanged,v=e.onMouseDown,h=e.onMouseOut,b=e.onMouseOver,C=e.onMouseUp,S=e.onPositionChanged,w=e.onRightClick,j=e.onShapeChanged,O=e.onTitleChanged,E=e.onVisibleChanged,k=e.onZIndexChanged,P=r.useContext(N),x=P.state,D=P.dispatch,L=r.useState(""),T=L[0],R=L[1],B=r.useState(void 0),I=B[0],A=B[1],J=r.useState(n||"marker-"+o())[0];return r.useEffect(function(){if(void 0!==x.map){var e=new google.maps.Marker(Object.assign({},a,{map:x.map}));return A(e),R(JSON.stringify(a)),function(e){D({type:"add_object",object:e,id:J})}(e),function(){return D({type:"remove_object",id:J})}}},[x.map]),_(I,[{name:"animation_changed",handler:t},{name:"click",handler:i},{name:"clickable_changed",handler:d},{name:"cursor_changed",handler:l},{name:"dblclick",handler:c},{name:"drag",handler:s},{name:"dragend",handler:u},{name:"draggable_changed",handler:p},{name:"dragstart",handler:m},{name:"flat_changed",handler:g},{name:"icon_changed",handler:f},{name:"mousedown",handler:v},{name:"mouseout",handler:h},{name:"mouseover",handler:b},{name:"mouseup",handler:C},{name:"position_changed",handler:S},{name:"rightclick",handler:w},{name:"shape_changed",handler:j},{name:"title_changed",handler:O},{name:"visible_changed",handler:E},{name:"zindex_changed",handler:k}]),M(I,a,T,R),null};Z.displayName="Marker";var W=function(e){var n=e.pane;void 0===n&&(n="overlayMouseTarget");var t=e.position;void 0===t&&(t=d);var o=e.children,i=e.onClick,l=e.onDoubleClick,c=e.onMouseDown,s=e.onMouseOut,u=e.onMouseOver,m=e.onMouseUp,p=e.onTouchEnd,g=e.onTouchStart,f=e.disableMapHits;void 0===f&&(f=!1);var v=e.disableMapHitsAndGestures;if(void 0===v&&(v=!1),"undefined"==typeof document)return null;var h=r.useContext(N).state,y=r.useState(document.createElement("div"))[0],b=r.useState(void 0),C=b[0],S=b[1];return r.useEffect(function(){if(void 0!==h.map){var e=new google.maps.OverlayView;return e.onAdd=function(){y.style.position="absolute",y.onclick=i||null,y.ondblclick=l||null,y.onmousedown=c||null,y.onmouseover=u||null,y.onmouseout=s||null,y.onmouseup=m||null,y.ontouchend=p||null,y.ontouchstart=g||null,v?google.maps.OverlayView.preventMapHitsAndGesturesFrom(y):f&&google.maps.OverlayView.preventMapHitsFrom(y),e.getPanes()[n].appendChild(y)},e.onRemove=function(){y.parentNode&&y.parentNode.removeChild(y)},e.setMap(h.map),S(e),function(){return e.setMap(null)}}},[h.map]),r.useEffect(function(){void 0!==C&&(C.setMap(null),C.draw=function(){var e=C.getProjection().fromLatLngToDivPixel(new google.maps.LatLng(t.lat,t.lng));y.style.left=JSON.stringify(e.x)+"px",y.style.top=JSON.stringify(e.y)+"px"},C.setMap(h.map))},[C,t]),a.createPortal(o,y)};W.displayName="OverlayView";var Q=function(e){var n=e.id,a=e.opts;void 0===a&&(a=b);var t=e.onClick,i=e.onDoubleClick,d=e.onDrag,l=e.onDragEnd,c=e.onDragStart,s=e.onMouseDown,u=e.onMouseOut,m=e.onMouseOver,p=e.onMouseUp,g=e.onRightClick,f=r.useContext(N),v=f.state,h=f.dispatch,y=r.useState(""),C=y[0],S=y[1],w=r.useState(void 0),j=w[0],O=w[1],E=r.useState(n||"polygon-"+o())[0];return r.useEffect(function(){if(void 0!==v.map){var e=new google.maps.Polygon(Object.assign({},a,{map:v.map}));return O(e),S(JSON.stringify(a)),function(e){h({type:"add_object",object:e,id:E})}(e),function(){return h({type:"remove_object",id:E})}}},[v.map]),_(j,[{name:"click",handler:t},{name:"dblclick",handler:i},{name:"drag",handler:d},{name:"dragend",handler:l},{name:"dragstart",handler:c},{name:"mousedown",handler:s},{name:"mouseout",handler:u},{name:"mouseover",handler:m},{name:"mouseup",handler:p},{name:"rightclick",handler:g}]),M(j,a,C,S),null};Q.displayName="Polygon";var X=function(e){var n=e.id,a=e.opts;void 0===a&&(a=C);var t=e.onClick,i=e.onDoubleClick,d=e.onDrag,l=e.onDragEnd,c=e.onDragStart,s=e.onMouseDown,u=e.onMouseOut,m=e.onMouseOver,p=e.onMouseUp,g=e.onRightClick,f=r.useContext(N),v=f.state,h=f.dispatch,y=r.useState(""),b=y[0],S=y[1],w=r.useState(void 0),j=w[0],O=w[1],E=r.useState(n||"polyline-"+o())[0];return r.useEffect(function(){if(void 0!==v.map){var e=new google.maps.Polyline(Object.assign({},a,{map:v.map}));return O(e),S(JSON.stringify(a)),function(e){h({type:"add_object",object:e,id:E})}(e),function(){return h({type:"remove_object",id:E})}}},[v.map]),_(j,[{name:"click",handler:t},{name:"dblclick",handler:i},{name:"drag",handler:d},{name:"dragend",handler:l},{name:"dragstart",handler:c},{name:"mousedown",handler:s},{name:"mouseout",handler:u},{name:"mouseover",handler:m},{name:"mouseup",handler:p},{name:"rightclick",handler:g}]),M(j,a,b,S),null};X.displayName="Polyline";var $=function(e){var n=e.id,a=e.opts;void 0===a&&(a=S);var t=e.onBoundsChanged,i=e.onClick,d=e.onDoubleClick,l=e.onDrag,c=e.onDragEnd,s=e.onDragStart,u=e.onMouseDown,m=e.onMouseOut,p=e.onMouseOver,g=e.onMouseUp,f=e.onRightClick,v=r.useContext(N),h=v.state,y=v.dispatch,b=r.useState(""),C=b[0],w=b[1],j=r.useState(void 0),O=j[0],E=j[1],k=r.useState(n||"rectangle-"+o())[0];return r.useEffect(function(){if(void 0!==h.map){var e=new google.maps.Rectangle(Object.assign({},a,{map:h.map}));return E(e),w(JSON.stringify(a)),function(e){y({type:"add_object",object:e,id:k})}(e),function(){return y({type:"remove_object",id:k})}}},[h.map]),_(O,[{name:"bounds_changed",handler:t},{name:"click",handler:i},{name:"dblclick",handler:d},{name:"drag",handler:l},{name:"dragend",handler:c},{name:"dragstart",handler:s},{name:"mousedown",handler:u},{name:"mouseout",handler:m},{name:"mouseover",handler:p},{name:"mouseup",handler:g},{name:"rightclick",handler:f}]),M(O,a,C,w),null};$.displayName="Rectangle";var ee=function(e){var n=e.id,a=e.opts;void 0===a&&(a=w);var d=e.onPlacesChanged,l=e.bindingPosition,c=function(e,n){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&-1===n.indexOf(t)&&(a[t]=e[t]);return a}(e,["id","opts","onPlacesChanged","bindingPosition"]),s=r.useContext(N),u=s.state,m=s.dispatch,p=r.useState(void 0),g=p[0],f=p[1],v=r.useState(n||"search-box-"+o())[0],h=r.useState(document.createRange().createContextualFragment(t.renderToString(i.createElement("input",Object.assign({id:v},c)))).firstElementChild)[0],y=r.useState(l),b=y[0],C=y[1];return r.useEffect(function(){if(void 0!==u.map&&void 0!==u.places){var e=l?h:document.getElementById(v),n=new google.maps.places.SearchBox(e,a);if(f(n),m({type:"add_object",object:n,id:v}),l){if(l!==b){var t=u.map.controls[google.maps.ControlPosition[b]],o=t.getArray();t.removeAt(o.findIndex(function(e){return e===h})),C(l)}u.map.controls[google.maps.ControlPosition[l]].push(e)}return function(){return m({type:"remove_object",id:v})}}},[u.places,l]),_(g,[{name:"places_changed",handler:d}]),r.useEffect(function(){void 0!==g&&void 0!==a.bounds&&g.setBounds(a.bounds)},[a.bounds]),l?null:i.createElement("input",Object.assign({id:v},c))};ee.displayName="SearchBox";var ne=function(e){return i.createElement(ee,Object.assign({},e))};ne.displayName="SearchBox";var ae=function(e){return i.createElement(ee,Object.assign({},e))};ae.displayName="StandaloneSearchBox";var te=function(e){var n=e.id,a=e.className,t=e.style;void 0===t&&(t=h);var d=e.opts;void 0===d&&(d=O);var l=e.bindToMap,c=e.onCloseClick,s=e.onPanoChanged,u=e.onPositionChanged,m=e.onPovChanged,p=e.onResize,g=e.onStatusChanged,f=e.onVisibleChanged,v=e.onZoomChanged,y=r.useContext(N),b=y.state,C=y.dispatch,S=r.useState(""),w=S[0],j=S[1],E=r.useState(void 0),k=E[0],P=E[1],x=r.useState(n||(l?"street-view":"street-view-"+o()))[0];return r.useEffect(function(){if(void 0!==b.map){var e=new google.maps.StreetViewPanorama(document.getElementById(x),d);return P(e),j(JSON.stringify(d)),function(e){C({type:"add_object",object:e,id:x})}(e),l&&b.map.setOptions({streetView:e}),function(){l&&b.map&&b.map.setOptions({streetView:void 0}),C({type:"remove_object",id:x})}}},[b.map]),_(k,[{name:"closeclick",handler:c},{name:"pano_changed",handler:s},{name:"position_changed",handler:u},{name:"pov_changed",handler:m},{name:"resize",handler:p},{name:"status_changed",handler:g},{name:"visible_changed",handler:f},{name:"zoom_changed",handler:v}]),M(k,d,w,j),i.createElement("div",{className:a,id:x,style:t})};te.displayName="BasicStreetView";var oe=function(e){return i.createElement(te,Object.assign({bindToMap:!1},e))};oe.displayName="StandaloneStreetView";var re=function(e){return i.createElement(te,Object.assign({bindToMap:!0},e))};re.displayName="StreetView";var ie=function(e){return i.createElement(B,{type:"traffic",opts:e.opts})};ie.displayName="TrafficLayer";var de=function(e){return i.createElement(B,{type:"transit"})};de.displayName="TransitLayer",e.Autocomplete=T,e.StandaloneAutocomplete=R,e.BicyclingLayer=I,e.Circle=A,e.CustomControl=J,e.DrawingManager=V,e.GroundOverlay=G,e.HeatMap=U,e.InfoWindow=K,e.KmlLayer=q,e.Layer=B,e.MapBox=Y,e.Marker=Z,e.OverlayView=W,e.Polygon=Q,e.Polyline=X,e.Rectangle=$,e.SearchBox=ne,e.StandaloneSearchBox=ae,e.StandaloneStreetView=oe,e.StreetView=re,e.TrafficLayer=ie,e.TransitLayer=de,e.withSecurityBounder=H,e.useGoogleAPI=k,e.useGoogleListener=_,e.GoogleMapProvider=function(e){var n=e.children,a=r.useReducer(x,P());return i.createElement(i.Fragment,null,i.createElement(N.Provider,{value:{state:a[0],dispatch:a[1]}},n))},e.GoogleMapContext=N,e.GoogleMapConsumer=D});
//# sourceMappingURL=index.umd.js.map
